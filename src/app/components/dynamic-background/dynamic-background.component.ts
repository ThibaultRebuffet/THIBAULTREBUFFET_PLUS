import { Component, OnInit } from '@angular/core';

import * as _ from "lodash";

@Component({
  selector: 'dynamic-background',
  templateUrl: './dynamic-background.component.html',
  styleUrls: ['./dynamic-background.component.css']
})
export class DynamicBackgroundComponent implements OnInit {

  constructor() { }

  private svgPaths:Array<any> = [];
  private holes = [
      ["M226","89C196.5626662926 "," 105.8950698193","146.8950698193 , 155.5626662926 , 130","185S94.3129733853 , 359.7542543498 , 115","413S269.0571053871 , 592.4589593431 , 339","584S503.8035948891 , 402.201134604 , 508","325S480.4019319857 , 141.0493863086 , 434","107S273.0455099353 , 66.395354572 , 226","89Z"],
      ["M226","89C196.5626662926 "," 105.8950698193","146.8950698193 , 155.5626662926 , 149","206S94.3129733853 , 359.7542543498 , 115","413S269.0571053871 , 592.4589593431 , 334","555S503.8035948891 , 402.201134604 , 528","325S480.4019319857 , 141.0493863086 , 434","127S273.0455099353 , 66.395354572 , 226","89Z"],
      ["M237","86C196.5626662926 "," 105.8950698193","146.8950698193 , 155.5626662926 , 138","259S94.3129733853 , 359.7542543498 , 115","413S269.0571053871 , 592.4589593431 , 409","551S503.8035948891 , 402.201134604 , 528","325S480.4019319857 , 141.0493863086 , 389","119S273.0455099353 , 66.395354572 , 237","86Z"],
      ["M237","86C196.5626662926 "," 105.8950698193","146.8950698193 , 155.5626662926 , 117","229S94.3129733853 , 359.7542543498 , 133","455S315.0571053871 , 530.4589593431 , 421","511S536.8035948890999 , 402.201134604 , 526","286S480.4019319857 , 141.0493863086 , 437","61S273.0455099353 , 66.395354572 , 237","86Z"],
      ["M237","86C196.5626662926 "," 105.8950698193","146.8950698193 , 155.5626662926 , 117","229S126.3129733853 , 343.7542543498 , 133","455S315.0571053871 , 530.4589593431 , 421","511S536.8035948890999 , 402.201134604 , 546","349S480.4019319857 , 141.0493863086 , 413","107S273.0455099353 , 66.395354572 , 237","86Z"],
      ["M296","125C194.5626662926 "," 113.8950698193","146.8950698193 , 155.5626662926 , 117","229S126.3129733853 , 343.7542543498 , 133","455S315.0571053871 , 530.4589593431 , 421","511S536.8035948890999 , 402.201134604 , 546","349S480.4019319857 , 141.0493863086 , 413","107S347.0455099353 , 126.395354572 , 296","125Z"],
      ["M296","125C194.5626662926 "," 113.8950698193","146.8950698193 , 155.5626662926 , 124","260S126.3129733853 , 343.7542543498 , 154","414S315.0571053871 , 530.4589593431 , 444","553S536.8035948890999 , 402.201134604 , 546","349S480.4019319857 , 141.0493863086 , 413","107S347.0455099353 , 126.395354572 , 296","125Z"],
      ["M253","92C194.5626662926 "," 113.8950698193","146.8950698193 , 155.5626662926 , 124","260S126.3129733853 , 343.7542543498 , 154","414S315.0571053871 , 530.4589593431 , 444","553S536.8035948890999 , 402.201134604 , 489","292S480.4019319857 , 141.0493863086 , 455","100S314.0455099353 , 68.395354572 , 253","92Z"],
      ["M253","92C194.5626662926 "," 113.8950698193","146.8950698193 , 155.5626662926 , 114","201S97.3129733853 , 371.7542543498 , 136","438S287.0571053871 , 572.4589593431 , 444","553S536.8035948890999 , 402.201134604 , 536","276S494.4019319857 , 114.04938630859999 , 455","100S314.0455099353 , 68.395354572 , 253","92Z"],
      ["M253","92C194.5626662926 "," 113.8950698193","146.8950698193 , 155.5626662926 , 114","201S97.3129733853 , 371.7542543498 , 131","470S287.0571053871 , 572.4589593431 , 444","553S558.8035948890999 , 372.201134604 , 536","276S482.4019319857 , 122.04938630859999 , 455","100S314.0455099353 , 68.395354572 , 253","92Z"],
      ["M253","92C194.5626662926 "," 113.8950698193","146.8950698193 , 155.5626662926 , 139","230S97.3129733853 , 371.7542543498 , 131","470S287.0571053871 , 572.4589593431 , 444","553S558.8035948890999 , 372.201134604 , 536","276S482.4019319857 , 122.04938630859999 , 449","105S314.0455099353 , 68.395354572 , 253","92Z"],
      ["M279","102C194.5626662926 "," 113.8950698193","146.8950698193 , 155.5626662926 , 115","210S97.3129733853 , 371.7542543498 , 131","470S287.0571053871 , 572.4589593431 , 444","553S558.8035948890999 , 372.201134604 , 567","312S547.4019319857 , 175.0493863086 , 504","134S362.0455099353 , 91.395354572 , 279","102Z"]
  ]


  /**
  * pathRandomGenerator funcion is used to generate a random value in a scope af given limits values
  * @_highLimit
  * @_lowLImit
  **/
  private pathRandomGenerator():any {
      let returnPath:string;
    // generate the random value and store it in the returnPath variable
    /**..........**/
    // return the value;
      return returnPath;
  }

  /**
  * shufflePath()
  * parse the holes array to make groups of values
  **/
  private shufflePath():any{
      // 1/ create an array of values grouped per index
      let zippedArray = _.zip(this.holes[0], this.holes[1], this.holes[2], this.holes[3], this.holes[4], this.holes[5], this.holes[6], this.holes[7], this.holes[8]);

      // 2/ shuffle each sub-arrays of zippedArray
      zippedArray = _.map(zippedArray, ( _item:Array<string> ) => {
          let shuffled =  _.shuffle(_item);
          return shuffled;

      });
      // 3/ unzip to retreive the original array organisation
      let returnArray = _.unzip(zippedArray);
      // 4/ transform to string each returnArray fields
      _.map( returnArray, _.toString);
      return returnArray;

  }

  /**
  * init()
  * initiation function
  **/
  private init() :void {
      this.svgPaths = [
        {   'groundLevel': 1,
            'scale': 'scale(1)',
            'color': '#D32F2F',
            'index': 0
        },
        {   'groundLevel': 2,
            'scale': 'scale(0.9)',
            'color': '#C2185B',
            'index': 1
        },
        {   'groundLevel': 3,
            'scale': 'scale(0.75)',
            'color': '#D84315',
            'index': 2
        },
        {   'groundLevel': 4,
            'scale': 'scale(0.58)',
            'color': '#C62828',
            'index': 3
        },
        {   'groundLevel': 5,
            'scale': 'scale(0.4)',
            'color': '#FF1744',
            'index': 4
        }
      ];
      let shuffledPaths:Array<any> = this.shufflePath();

      _.map( this.svgPaths, ( _pathItem:any ) => {
          _pathItem.path = shuffledPaths[_pathItem.index];
      });
  }

  ngOnInit() {
      this.init();
  }

}
